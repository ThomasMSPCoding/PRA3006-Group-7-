<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OncoMap - Additional Information</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Main Container -->
    <div class="main-container">
           <!-- Navigation Bar -->
<header>
    <nav>
        <ul class="nav-links">
            <div class="nav-left">
                <li><a href="index.html" class="nav-link">INDEX</a></li>
                <li><a href="interaction.html" class="nav-link">INTERACTIVE BODY</a></li>
            </div>
            <div class="logo">
                <a href="index.html">
                    <img src="img/Logo.png" alt="OncoMap Logo">
                </a>
            </div>
            <div class="nav-right">
                <li><a href="research.html" class="nav-link">ADDITIONAL INFO</a></li>
                <li><a href="Source.html" class="nav-link">SOURCES</a></li>
            </div>
        </ul>
    </nav>
</header>

        <!-- Content Section -->
        <main>
            <section class="query-section">
                <h1 class="additional-info-title">Additional Information</h1>
                <hr />
                <p class="additional-info-description">
                    Here you can find detailed information about various cancers, all sourced via Wikidata SPARQL queries. 
                    For each individual cancer type, the table below will outline possible symptoms, 
                    the types of drugs that are used to treat it and their location in the human body.
                    for additional information on the symptoms, there is a supplementary table below,
                    from which the associated Wikipedia page can be found.

                </p>
                <div id="results" class="results-container"></div>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <div class="footer-links">
                <div class="footer-nav">
                    <a href="Source.html" class="footer-link">Contact Us</a>
                    <a href="#" class="footer-link">Copy Right</a>
                    <a href="#" class="footer-link">Disclaimer</a>
                    <a href="#" class="footer-link">Privacy Policy</a>
                </div>
                <p>Â© 2024 Programming in the Life Sciences Project Oncomap. All rights reserved</p>
            </div>
        </footer>
    </div>

    <!-- JavaScript section, this will made it possible to link SPARQL together with HTML, to represent the table -->
    <script src="query.js"></script>
    <script>
        /*This part of javascript is the function to hyperlink with the additional website research*/
        function displayResults(result) {
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = '<h2>SPARQL Query Results:</h2>';

    if (result.results.bindings.length === 0) {
        resultsDiv.innerHTML += '<p>No results found.</p>';
        return;
    }

    // Create first table to display results of query 1
    const table = document.createElement('table');
    table.innerHTML = `
        <tr>
            <th>Disease</th>
            <th>Symptoms</th>
            <th>Treatments</th>
            <th>Locations</th>
        </tr>
    `;

    // Cancer type to URL mapping
    const cancerUrls = {
        'brain cancer': 'https://www.cancer.gov/types/brain',
        'breast cancer': 'https://www.cancer.gov/types/breast',
        'non-small-cell lung carcinoma': 'https://www.cancer.gov/types/lung',
        'thyroid cancer': 'https://www.cancer.gov/types/thyroid',
        'skin cancer': 'https://www.cancer.gov/types/skin',
        'lymphoma': 'https://www.cancer.gov/types/lymphoma',
        'liver cancer': 'https://www.cancer.gov/types/liver',
        'kidney cancer': 'https://www.cancer.gov/types/kidney',
        'pancreatic cancer': 'https://www.cancer.gov/types/pancreatic',
        'colon cancer': 'https://www.cancer.gov/types/colorectal',
        'endometrial carcinoma': 'https://www.cancer.gov/types/uterine',
        'leukemia': 'https://www.cancer.gov/types/leukemia',
        'prostate cancer': 'https://www.cancer.gov/types/prostate'
    };

    result.results.bindings.forEach((binding) => {
        const disease = binding.diseaseLabel?.value || "N/A";
        const symptoms = binding.symptoms?.value || "N/A";
        const treatments = binding.treatments?.value || "N/A";
        const locations = binding.locations?.value || "N/A";

        const row = document.createElement('tr');
        const diseaseLower = disease.toLowerCase();
        
        // Make the disease cell clickable if URL exists
        const diseaseCell = `<td ${cancerUrls[diseaseLower] ? `class="clickable" onclick="window.open('${cancerUrls[diseaseLower]}', '_blank')"` : ''}>${disease}</td>`;
        
        row.innerHTML = `
            ${diseaseCell}
            <td>${symptoms}</td>
            <td>${treatments}</td>
            <td>${locations}</td>
        `;
        table.appendChild(row);
    });

    resultsDiv.appendChild(table);
    
    // Create second table for symptom links (query 2)
const table2 = document.createElement('table');
table2.innerHTML = `
    <tr>
        <th>Symptom</th>
        <th>Wikipedia Link</th>
    </tr>
`;

// Iterate over the results from the second SPARQL query (symptoms data)
result.results.bindings.forEach((binding) => {
    const symptom = binding.symptomLabel?.value || "N/A";
    const article = binding.article?.value || "#";

    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${symptom}</td>
        <td><a href="${article}" target="_blank">Wikipedia</a></td>
    `;
    table2.appendChild(row);
});

// Append the second table below the first
resultsDiv.appendChild(table2);
}
    </script>
</body>
</html>
